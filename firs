CREATE OR REPLACE FUNCTION api.get_shape_point(search_shape_id INTEGER) 
  RETURNS TABLE (point_order INTEGER, latitude DOUBLE PRECISION, longitude DOUBLE PRECISION)
AS $$
DECLARE
  point_record RECORD;
BEGIN
  FOR point_record IN 
    SELECT segment, latitude, longitude
    FROM data.coastline
    WHERE shape = search_shape_id
    ORDER BY segment
  LOOP
    RETURN NEXT point_record;
  END LOOP;
  RETURN;
END;
$$ LANGUAGE plpgsql;
